{"dependencies":[{"name":"../","data":{"isAsync":false}},{"name":"lodash/isArray","data":{"isAsync":false}},{"name":"lodash/isFunction","data":{"isAsync":false}},{"name":"lodash/isObjectLike","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var core = _$$_REQUIRE(_dependencyMap[0], \"../\"),\n      isArray = _$$_REQUIRE(_dependencyMap[1], \"lodash/isArray\"),\n      isFunction = _$$_REQUIRE(_dependencyMap[2], \"lodash/isFunction\"),\n      isObjectLike = _$$_REQUIRE(_dependencyMap[3], \"lodash/isObjectLike\");\n\n  module.exports = function (options) {\n    var errorText = 'Please verify options';\n\n    if (!isObjectLike(options)) {\n      throw new TypeError(errorText);\n    }\n\n    if (!isFunction(options.request)) {\n      throw new TypeError(errorText + '.request');\n    }\n\n    if (!isArray(options.expose) || options.expose.length === 0) {\n      throw new TypeError(errorText + '.expose');\n    }\n\n    var plumbing = core({\n      PromiseImpl: options.PromiseImpl,\n      constructorMixin: options.constructorMixin\n    });\n    var originalInit = options.request.Request.prototype.init;\n\n    options.request.Request.prototype.init = function RP$initInterceptor(requestOptions) {\n      if (isObjectLike(requestOptions) && !this._callback && !this._rp_promise) {\n        plumbing.init.call(this, requestOptions);\n      }\n\n      return originalInit.apply(this, arguments);\n    };\n\n    var thenExposed = false;\n\n    for (var i = 0; i < options.expose.length; i += 1) {\n      var method = options.expose[i];\n      plumbing[method === 'promise' ? 'exposePromise' : 'exposePromiseMethod'](options.request.Request.prototype, null, '_rp_promise', method);\n\n      if (method === 'then') {\n        thenExposed = true;\n      }\n    }\n\n    if (!thenExposed) {\n      throw new Error('Please expose \"then\"');\n    }\n  };\n});","map":[[2,0,1,0],[4,0,3,0],[4,6,3,4,"core"],[4,10,3,8],[4,13,3,11,"require"],[4,24,3,18],[4,50,3,0],[5,0,3,0],[5,6,4,4,"isArray"],[5,13,4,11],[5,16,4,14,"require"],[5,27,4,21],[5,64,3,0],[6,0,3,0],[6,6,5,4,"isFunction"],[6,16,5,14],[6,19,5,17,"require"],[6,30,5,24],[6,70,3,0],[7,0,3,0],[7,6,6,4,"isObjectLike"],[7,18,6,16],[7,21,6,19,"require"],[7,32,6,26],[7,74,3,0],[9,0,9,0,"module"],[9,2,9,0,"module"],[9,8,9,6],[9,9,9,7,"exports"],[9,16,9,0],[9,19,9,17],[9,29,9,27,"options"],[9,36,9,17],[9,38,9,36],[10,0,11,4],[10,8,11,8,"errorText"],[10,17,11,17],[10,20,11,20],[10,43,11,4],[12,0,13,4],[12,8,13,8],[12,9,13,9,"isObjectLike"],[12,21,13,21],[12,22,13,22,"options"],[12,29,13,21],[12,30,13,4],[12,32,13,32],[13,0,14,8],[13,12,14,14],[13,16,14,18,"TypeError"],[13,25,14,14],[13,26,14,28,"errorText"],[13,35,14,14],[13,36,14,8],[14,0,15,5],[16,0,17,4],[16,8,17,8],[16,9,17,9,"isFunction"],[16,19,17,19],[16,20,17,20,"options"],[16,27,17,27],[16,28,17,28,"request"],[16,35,17,19],[16,36,17,4],[16,38,17,38],[17,0,18,8],[17,12,18,14],[17,16,18,18,"TypeError"],[17,25,18,14],[17,26,18,28,"errorText"],[17,35,18,37],[17,38,18,40],[17,48,18,14],[17,49,18,8],[18,0,19,5],[20,0,21,4],[20,8,21,8],[20,9,21,9,"isArray"],[20,16,21,16],[20,17,21,17,"options"],[20,24,21,24],[20,25,21,25,"expose"],[20,31,21,16],[20,32,21,8],[20,36,21,36,"options"],[20,43,21,43],[20,44,21,44,"expose"],[20,50,21,36],[20,51,21,51,"length"],[20,57,21,36],[20,62,21,62],[20,63,21,4],[20,65,21,65],[21,0,22,8],[21,12,22,14],[21,16,22,18,"TypeError"],[21,25,22,14],[21,26,22,28,"errorText"],[21,35,22,37],[21,38,22,40],[21,47,22,14],[21,48,22,8],[22,0,23,5],[24,0,26,4],[24,8,26,8,"plumbing"],[24,16,26,16],[24,19,26,19,"core"],[24,23,26,23],[24,24,26,24],[25,0,27,8,"PromiseImpl"],[25,6,27,8,"PromiseImpl"],[25,17,27,19],[25,19,27,21,"options"],[25,26,27,28],[25,27,27,29,"PromiseImpl"],[25,38,26,24],[26,0,28,8,"constructorMixin"],[26,6,28,8,"constructorMixin"],[26,22,28,24],[26,24,28,26,"options"],[26,31,28,33],[26,32,28,34,"constructorMixin"],[27,0,26,24],[27,5,26,23],[27,6,26,4],[28,0,34,4],[28,8,34,8,"originalInit"],[28,20,34,20],[28,23,34,23,"options"],[28,30,34,30],[28,31,34,31,"request"],[28,38,34,23],[28,39,34,39,"Request"],[28,46,34,23],[28,47,34,47,"prototype"],[28,56,34,23],[28,57,34,57,"init"],[28,61,34,4],[30,0,36,4,"options"],[30,4,36,4,"options"],[30,11,36,11],[30,12,36,12,"request"],[30,19,36,4],[30,20,36,20,"Request"],[30,27,36,4],[30,28,36,28,"prototype"],[30,37,36,4],[30,38,36,38,"init"],[30,42,36,4],[30,45,36,45],[30,54,36,54,"RP$initInterceptor"],[30,72,36,45],[30,73,36,73,"requestOptions"],[30,87,36,45],[30,89,36,89],[31,0,39,8],[31,10,39,12,"isObjectLike"],[31,22,39,24],[31,23,39,25,"requestOptions"],[31,37,39,24],[31,38,39,12],[31,42,39,44],[31,43,39,45],[31,48,39,50,"_callback"],[31,57,39,12],[31,61,39,63],[31,62,39,64],[31,67,39,69,"_rp_promise"],[31,78,39,8],[31,80,39,82],[32,0,41,12,"plumbing"],[32,8,41,12,"plumbing"],[32,16,41,20],[32,17,41,21,"init"],[32,21,41,12],[32,22,41,26,"call"],[32,26,41,12],[32,27,41,31],[32,31,41,12],[32,33,41,37,"requestOptions"],[32,47,41,12],[33,0,43,9],[35,0,45,8],[35,13,45,15,"originalInit"],[35,25,45,27],[35,26,45,28,"apply"],[35,31,45,15],[35,32,45,34],[35,36,45,15],[35,38,45,40,"arguments"],[35,47,45,15],[35,48,45,8],[36,0,47,5],[36,5,36,4],[38,0,52,4],[38,8,52,8,"thenExposed"],[38,19,52,19],[38,22,52,22],[38,27,52,4],[40,0,53,4],[40,9,53,10],[40,13,53,14,"i"],[40,14,53,15],[40,17,53,18],[40,18,53,4],[40,20,53,21,"i"],[40,21,53,22],[40,24,53,25,"options"],[40,31,53,32],[40,32,53,33,"expose"],[40,38,53,25],[40,39,53,40,"length"],[40,45,53,4],[40,47,53,48,"i"],[40,48,53,49],[40,52,53,51],[40,53,53,4],[40,55,53,55],[41,0,55,8],[41,10,55,12,"method"],[41,16,55,18],[41,19,55,21,"options"],[41,26,55,28],[41,27,55,29,"expose"],[41,33,55,21],[41,34,55,36,"i"],[41,35,55,21],[41,36,55,8],[42,0,57,8,"plumbing"],[42,6,57,8,"plumbing"],[42,14,57,16],[42,15,57,18,"method"],[42,21,57,24],[42,26,57,29],[42,35,57,18],[42,38,57,41],[42,53,57,18],[42,56,57,59],[42,77,57,16],[42,78,57,8],[42,79,58,12,"options"],[42,86,58,19],[42,87,58,20,"request"],[42,94,58,12],[42,95,58,28,"Request"],[42,102,58,12],[42,103,58,36,"prototype"],[42,112,57,8],[42,114,59,12],[42,118,57,8],[42,120,60,12],[42,133,57,8],[42,135,61,12,"method"],[42,141,57,8],[44,0,64,8],[44,10,64,12,"method"],[44,16,64,18],[44,21,64,23],[44,27,64,8],[44,29,64,31],[45,0,65,12,"thenExposed"],[45,8,65,12,"thenExposed"],[45,19,65,23],[45,22,65,26],[45,26,65,12],[46,0,66,9],[47,0,68,5],[49,0,70,4],[49,8,70,8],[49,9,70,9,"thenExposed"],[49,20,70,4],[49,22,70,22],[50,0,71,8],[50,12,71,14],[50,16,71,18,"Error"],[50,21,71,14],[50,22,71,24],[50,44,71,14],[50,45,71,8],[51,0,72,5],[52,0,74,1],[52,3,9,0]]},"type":"js/module"}]}